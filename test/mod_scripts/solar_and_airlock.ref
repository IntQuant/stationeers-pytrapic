jal airlock.init
jal solar.init
move r0 88
lbwhile4:
  yield
  jal airlock.update
  jal solar.update
  sub r0 r0 1
  s db Setting r0
  j lbwhile4
airlock.init:
  sbn HASH("StructureGlassDoor") HASH("In") Lock 1
  sbn HASH("StructureGlassDoor") HASH("Out") Lock 1
  sbn HASH("StructureActiveVent") HASH("In") Mode 1
  sbn HASH("StructureActiveVent") HASH("In") On 0
  sbn HASH("StructureActiveVent") HASH("Out") Mode 1
  sbn HASH("StructureActiveVent") HASH("Out") On 0
  j ra
airlock.update:
  lbn r1 HASH("StructureDiodeSlide") HASH("Switch") On Maximum
  ble r1 0 lbelse5
    lbn r2 HASH("StructureGlassDoor") HASH("In") Open Maximum
    sgt r1 r2 0
    select r2 r1 HASH("Out") HASH("In")
    select r3 r1 HASH("In") HASH("Out")
    sbn HASH("StructureGlassDoor") r3 Open 0
    sbn HASH("StructureActiveVent") r3 On 1
lbwhile11:
    lb r1 HASH("StructureGasSensor") Pressure Maximum
    beq r1 0 lbwhile.end11
      j lbwhile11
lbwhile.end11:
    sleep 0.2
    sbn HASH("StructureActiveVent") r3 On 0
    sbn HASH("StructureGlassDoor") r2 Open 1
    sbn HASH("StructureDiodeSlide") HASH("Switch") On 0
    sleep 1
lbelse5:
  j ra
solar.init:
  j ra
solar.update:
  l r1 d0 Horizontal
  sb HASH("StructureSolarPanel") Horizontal r1
  l r1 d0 Vertical
  sub r2 90 r1
  sb HASH("StructureSolarPanel") Vertical r2
  j ra
# registers: 4
# lines: 48
